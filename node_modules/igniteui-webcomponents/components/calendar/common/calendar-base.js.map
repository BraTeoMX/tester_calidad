{"version":3,"file":"calendar-base.js","sourceRoot":"","sources":["../../../../src/components/calendar/common/calendar-base.ts"],"names":[],"mappings":"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","sourcesContent":["import { LitElement } from 'lit';\nimport { property } from 'lit/decorators.js';\n\nimport { blazorDeepImport } from '../../common/decorators/blazorDeepImport.js';\nimport { blazorIndirectRender } from '../../common/decorators/blazorIndirectRender.js';\nimport { blazorSuppress } from '../../common/decorators/blazorSuppress.js';\nimport { watch } from '../../common/decorators/watch.js';\nimport { Calendar, type DateRangeDescriptor } from './calendar.model.js';\nimport { getWeekDayNumber } from './utils.js';\n\nexport const MONTHS_PER_ROW = 3;\nexport const YEARS_PER_ROW = 3;\n\nexport interface IgcCalendarBaseEventMap {\n  igcChange: CustomEvent<Date | Date[]>;\n}\n\n@blazorIndirectRender\n@blazorDeepImport\nexport class IgcCalendarBaseComponent extends LitElement {\n  private _activeDate = new Date();\n  private _activeDateSetFlag = false;\n  protected calendarModel = new Calendar();\n\n  /**\n   * The current value of the calendar.\n   * Used when selection is set to single.\n   */\n  @blazorSuppress()\n  @property({\n    converter: {\n      fromAttribute: (value: string) => (value ? new Date(value) : undefined),\n      toAttribute: (value: Date) => value.toISOString(),\n    },\n  })\n  public value?: Date;\n  //we suppress value for blazor since we need to expose it on the leaves with the events for now.\n\n  /**\n   * The current values of the calendar.\n   * Used when selection is set to multiple or range.\n   */\n  @blazorSuppress()\n  @property({\n    converter: {\n      fromAttribute: (value: string) =>\n        !value\n          ? undefined\n          : value\n              .split(',')\n              .map((v) => v.trim())\n              .filter((v) => v)\n              .map((v) => new Date(v)),\n      toAttribute: (value: Date[]) =>\n        value.map((v) => v.toISOString()).join(','),\n    },\n  })\n  public values?: Date[];\n\n  /** Sets the type of date selection. */\n  @property()\n  public selection: 'single' | 'multiple' | 'range' = 'single';\n\n  /** Show/hide the week numbers. */\n  @property({ type: Boolean, attribute: 'show-week-numbers', reflect: true })\n  public showWeekNumbers = false;\n\n  /** Sets the start day of the week. */\n  @property({ attribute: 'week-start' })\n  public weekStart:\n    | 'sunday'\n    | 'monday'\n    | 'tuesday'\n    | 'wednesday'\n    | 'thursday'\n    | 'friday'\n    | 'saturday' = 'sunday';\n\n  /** Sets the date which is shown in view and is highlighted. By default it is the current date. */\n  public set activeDate(val: Date) {\n    const oldVal = this._activeDate;\n    this._activeDate = val;\n    this._activeDateSetFlag = true;\n    this.requestUpdate('activeDate', oldVal);\n  }\n\n  @blazorSuppress()\n  @property({\n    attribute: 'active-date',\n    converter: {\n      fromAttribute: (value: string) => (value ? new Date(value) : new Date()),\n      toAttribute: (value: Date) => value.toISOString(),\n    },\n  })\n  public get activeDate(): Date {\n    return this._activeDate;\n  }\n\n  /** Sets the locale used for formatting and displaying the dates in the calendar. */\n  @property()\n  public locale = 'en';\n\n  /** Gets/sets disabled dates. */\n  @property({ attribute: false })\n  public disabledDates!: DateRangeDescriptor[];\n\n  /** Gets/sets special dates. */\n  @property({ attribute: false })\n  public specialDates!: DateRangeDescriptor[];\n\n  @watch('weekStart')\n  protected weekStartChange() {\n    this.calendarModel.firstWeekDay = getWeekDayNumber(this.weekStart);\n  }\n\n  @watch('selection', { waitUntilFirstUpdate: true })\n  protected selectionChange() {\n    this.value = undefined;\n  }\n\n  protected override async firstUpdated() {\n    if (this._activeDateSetFlag) {\n      return;\n    }\n    if (this.selection === 'single') {\n      this.activeDate = this.value ?? this.activeDate;\n    } else {\n      this.activeDate = this.values ? this.values[0] : this.activeDate;\n    }\n  }\n}\n"]}